{% import "utils.html" as utils %}
<form method="POST" action="/user/{{ userid }}/pushsw">
  <h2 class="text-center">私有签到框架<sup>alpha</sup></h2>
  <hr>
  {% if task.disabled %}
  <p class="alert alert-danger">任务处于禁用状态，使用 <a class="modal_load alert-link" href="/task/{{ task.id }}/run">立即执行</a> 成功签到一次，即可解除。</p>
  {% endif %}

  <div id="run-result"></div>

  <div class="checkbox">
    <label>
      <input type="checkbox" id="handpush_succ" name="handpush_succ" > 手动执行成功通知
    </label>
  </div>
  <div class="checkbox">
    <label>
      <input type="checkbox" id="handpush_fail" name="handpush_fail" > 手动执行失败通知
    </label>
  </div>
  <div class="checkbox">
    <label>
      <input type="checkbox" id="autopush_succ" name="autopush_succ" > 自动执行成功通知
    </label>
  </div>
  <div class="checkbox">
    <label>
      <input type="checkbox" id="autopush_fail" name="autopush_fail" checked=""> 自动执行失败通知
    </label>
  </div>

  <div class="text-right">
    <button id="sendpushsw" name="sendpushsw" type="submit" data-loading-text="loading..." class="btn btn-primary">提交</button>
  </div>
  <script>
    $(function() {
      // 测试链接
      $('#sendpushsw').on('click', function() {
        // var json = {};
        // var input = document.getElementById('handpush_succ');
        // json["1"] = input;
        // var $this = $(this);
        // $this.button('loading');
        // $.ajax("/user/{{ userid }}/pushsw", {
        //   type: 'POST',
        //   dataType: "json",
        //   data: $('#handpush_succ').serialize(),
        // })
        // .done(function(data) {
        //   $('#run-result').html(data).show()
        // })
        // .fail(function(jxhr) {
        //   $('#run-result').html('<h1 class="alert alert-danger text-center">设置失败</h1><div class="well"></div>').show().find('div').text(jxhr.responseText);
        // })
        // .always(function() {
        //   $this.button('reset');
        // });

        // return false;
      });
    })
  </script>

  {{ utils.task_new_scripts() }}
  {{ utils.submit_loading() }}
</form>
